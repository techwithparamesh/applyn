# Copy this file to `.env` for local dev, or set these variables in PM2 / your VPS environment.
# IMPORTANT: Never commit a real `.env` with secrets.

# --- Environment ---
NODE_ENV=production
PORT=5000

# --- App URL (used for password reset links, etc.) ---
APP_URL=https://applyn.co.in

# --- Database / Storage ---
# Must start with mysql://
# Format: mysql://USER:PASSWORD@HOST:3306/DBNAME
DATABASE_URL=mysql://YOUR_DB_USER:YOUR_DB_PASSWORD@YOUR_DB_HOST:3306/YOUR_DB_NAME

# Use MySQL for all app data
STORAGE=mysql

# Persist login sessions in MySQL
SESSION_STORE=mysql

# Must be a long random string in production (32+ chars recommended)
SESSION_SECRET=replace-with-a-long-random-secret

# Optional: MySQL pool size (default 10)
DB_POOL_SIZE=10

# --- CSRF / Origins (cookie sessions) ---
# Comma-separated list of allowed origins in production.
# For your domain:
APP_ORIGINS=https://applyn.co.in,https://www.applyn.co.in

# --- Artifacts / Build worker ---
# Directory where built APKs are stored. Must be writable by the worker and readable by the API.
ARTIFACTS_DIR=/var/applyn/artifacts

# Docker image used to build Android APKs
ANDROID_BUILDER_IMAGE=applyn-android-builder:latest

# Optional: worker identity
WORKER_ID=

# Run worker in same process as API (true/false)
INLINE_WORKER=true

# Polling interval for worker job queue
WORKER_POLL_MS=2000

# Build timeout for a single Gradle build (ms)
BUILD_TIMEOUT_MS=1200000

# Retry policy
MAX_BUILD_ATTEMPTS=3
BUILD_JOB_LOCK_TTL_MS=1800000
BUILD_RETRY_BACKOFF_MS=10000

# Artifact retention policy
ARTIFACT_RETENTION_DAYS=30
ARTIFACT_MAX_PER_APP=10

# --- Mock build (for testing without Docker) ---
# Set to "true" to simulate builds without Docker
MOCK_ANDROID_BUILD=false
# Set to "true" to simulate first build failing then succeeding
MOCK_ANDROID_BUILD_FAIL_ONCE=false

# --- Google OAuth (optional) ---
# If these are not set, the "Continue with Google" button will redirect back with an error.
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_CALLBACK_URL=https://applyn.co.in/api/auth/google/callback

# --- Razorpay Payment Gateway ---
# Get these from https://dashboard.razorpay.com/app/keys
RAZORPAY_KEY_ID=
RAZORPAY_KEY_SECRET=

# --- Push Notifications (OneSignal - optional) ---
# Get these from https://onesignal.com after creating an app
# Without these, notifications are saved but not delivered to devices
ONESIGNAL_APP_ID=
ONESIGNAL_API_KEY=

# --- E2E sanity script (optional) ---
# Used only if you run `npm run e2e:sanity` on the VPS.
BASE_URL=https://applyn.co.in
SANITY_ORIGIN=https://applyn.co.in
SANITY_REFERER=https://applyn.co.in/
SANITY_TIMEOUT_MS=180000
